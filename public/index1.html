<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>JooMusic - Putar Musik Gratis</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background-color: #000000;
            color: #ffffff;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* professional scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #1a1a1a;
        }

        ::-webkit-scrollbar-thumb {
            background: #333333;
            border-radius: 20px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #444444;
        }

        /* main container */
        .app {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
            background: linear-gradient(145deg, #0a0a0a 0%, #000000 100%);
        }

        /* navbar */
        .navbar {
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 24px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .nav-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .hamburger {
            width: 24px;
            height: 24px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            cursor: pointer;
            padding: 4px 0;
            transition: all 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
        }

        .hamburger-line {
            width: 100%;
            height: 2px;
            background-color: #ffffff;
            border-radius: 4px;
            transition: all 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
        }

        .hamburger.active .hamburger-line:nth-child(1) {
            transform: rotate(45deg) translate(6px, 6px);
        }

        .hamburger.active .hamburger-line:nth-child(2) {
            opacity: 0;
            transform: scaleX(0);
        }

        .hamburger.active .hamburger-line:nth-child(3) {
            transform: rotate(-45deg) translate(6px, -6px);
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .logo-container {
            position: relative;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
            padding: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo-image {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #000000;
        }

        .site-title {
            font-size: 20px;
            font-weight: 600;
            letter-spacing: -0.5px;
            color: #ffffff;
        }

        /* sidebar menu */
        .sidebar {
            position: fixed;
            top: 0;
            left: -320px;
            width: 300px;
            height: 100vh;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border-right: 1px solid rgba(255, 255, 255, 0.05);
            z-index: 200;
            transition: left 0.4s cubic-bezier(0.25, 0.1, 0.25, 1);
            padding: 80px 24px 32px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.8);
        }

        .sidebar.open {
            left: 0;
        }

        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            z-index: 150;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .sidebar-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .menu-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            border-radius: 16px;
            color: #ffffff;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s ease;
            margin-bottom: 8px;
            border: 1px solid transparent;
        }

        .menu-item:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .menu-item svg {
            width: 24px;
            height: 24px;
            fill: none;
            stroke: currentColor;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .developer-section {
            margin-top: auto;
            padding: 24px 16px;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 24px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .dev-name {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #ffffff, #aaaaaa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .dev-bio {
            font-size: 14px;
            color: #aaaaaa;
            line-height: 1.6;
            font-weight: 300;
        }

        .contact-links {
            display: flex;
            gap: 16px;
            margin-top: 20px;
        }

        .contact-link {
            width: 44px;
            height: 44px;
            border-radius: 14px;
            background: rgba(255, 255, 255, 0.03);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .contact-link:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .contact-link svg {
            width: 22px;
            height: 22px;
            fill: none;
            stroke: #ffffff;
            stroke-width: 2;
        }

        /* main content */
        .main-content {
            flex: 1;
            padding: 24px 24px 100px;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }

        /* search section */
        .search-container {
            margin-bottom: 40px;
        }

        .search-wrapper {
            position: relative;
            width: 100%;
        }

        .search-icon {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            color: #666666;
        }

        .search-input {
            width: 100%;
            padding: 20px 24px 20px 56px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 40px;
            font-size: 16px;
            font-weight: 400;
            color: #ffffff;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .search-input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.05);
            box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.02);
        }

        .search-input::placeholder {
            color: #666666;
            font-weight: 300;
        }

        /* section headers */
        .section-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .section-header svg {
            width: 22px;
            height: 22px;
            stroke: #888888;
            fill: none;
        }

        .section-header h2 {
            font-size: 18px;
            font-weight: 600;
            color: #ffffff;
            letter-spacing: -0.3px;
        }

        /* recent grid */
        .recent-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 16px;
            margin-bottom: 40px;
        }

        .recent-item {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 20px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid rgba(255, 255, 255, 0.03);
        }

        .recent-item:hover {
            background: rgba(255, 255, 255, 0.05);
            transform: translateY(-2px);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .recent-thumb {
            width: 100%;
            aspect-ratio: 1;
            border-radius: 16px;
            object-fit: cover;
            margin-bottom: 12px;
        }

        .recent-title {
            font-size: 15px;
            font-weight: 500;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .recent-artist {
            font-size: 13px;
            color: #888888;
            font-weight: 300;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* search results */
        .results-grid {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .result-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.01);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid transparent;
        }

        .result-item:hover {
            background: rgba(255, 255, 255, 0.04);
            border-color: rgba(255, 255, 255, 0.05);
        }

        .result-thumb {
            width: 60px;
            height: 60px;
            border-radius: 16px;
            object-fit: cover;
        }

        .result-info {
            flex: 1;
        }

        .result-title {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .result-artist {
            font-size: 14px;
            color: #888888;
            font-weight: 300;
        }

        .result-duration {
            font-size: 14px;
            color: #666666;
            font-weight: 300;
            margin-right: 16px;
        }

        /* loading spinner */
        .loading-spinner {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 40px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 255, 255, 0.03);
            border-top: 3px solid #ffffff;
            border-radius: 50%;
            animation: spin 1s cubic-bezier(0.76, 0.21, 0.29, 1.04) infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* now playing bar */
        .now-playing-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            padding: 12px 24px;
            display: flex;
            align-items: center;
            gap: 16px;
            z-index: 100;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }

        .now-playing-bar.show {
            transform: translateY(0);
        }

        .now-playing-thumb {
            width: 56px;
            height: 56px;
            border-radius: 16px;
            object-fit: cover;
        }

        .now-playing-info {
            flex: 1;
        }

        .now-playing-title {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .now-playing-artist {
            font-size: 14px;
            color: #888888;
            font-weight: 300;
        }

        .now-playing-controls {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .control-btn {
            background: none;
            border: none;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .control-btn svg {
            width: 24px;
            height: 24px;
            stroke: #ffffff;
            fill: none;
        }

        .play-btn svg {
            width: 32px;
            height: 32px;
        }

        /* full player */
        .full-player {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #000000;
            z-index: 300;
            overflow-y: auto;
            padding: 24px;
            display: none;
            flex-direction: column;
        }

        .full-player.show {
            display: flex;
        }

        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
        }

        .close-player {
            width: 44px;
            height: 44px;
            border-radius: 22px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .close-player svg {
            width: 24px;
            height: 24px;
            stroke: #ffffff;
        }

        .player-thumb {
            width: 100%;
            max-width: 400px;
            aspect-ratio: 1;
            border-radius: 32px;
            object-fit: cover;
            margin: 0 auto 32px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        }

        .player-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
            text-align: center;
        }

        .player-artist {
            font-size: 18px;
            color: #888888;
            font-weight: 300;
            text-align: center;
            margin-bottom: 32px;
        }

        .player-main-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 32px;
            margin-bottom: 40px;
        }

        .lyrics-section {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 32px;
            padding: 32px;
            margin-top: 20px;
        }

        .lyrics-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .lyrics-content {
            font-size: 16px;
            line-height: 1.8;
            color: #cccccc;
            font-weight: 300;
            white-space: pre-line;
        }

        /* donation section */
        .donation-section {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 40px;
            padding: 40px;
            margin-top: 40px;
            border: 1px solid rgba(255, 255, 255, 0.03);
        }

        .donation-title {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #ffffff, #aaaaaa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .donation-text {
            font-size: 16px;
            color: #aaaaaa;
            font-weight: 300;
            margin-bottom: 32px;
            line-height: 1.6;
        }

        .qris-container {
            background: #ffffff;
            border-radius: 40px;
            padding: 24px;
            display: inline-block;
            margin-bottom: 32px;
        }

        .qris-image {
            max-width: 300px;
            width: 100%;
            height: auto;
            border-radius: 24px;
        }

        .download-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 16px 32px;
            border-radius: 40px;
            color: #ffffff;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 12px;
        }

        .download-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .download-btn svg {
            width: 20px;
            height: 20px;
            stroke: #ffffff;
        }

        /* utility classes */
        .hidden {
            display: none !important;
        }

        /* responsive */
        @media (max-width: 640px) {
            .navbar {
                padding: 12px 16px;
            }
            
            .main-content {
                padding: 16px 16px 100px;
            }
            
            .recent-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            }
            
            .donation-section {
                padding: 24px;
            }
            
            .player-title {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- navbar -->
        <nav class="navbar">
            <div class="nav-left">
                <div class="hamburger" id="hamburger">
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                </div>
            </div>
            <div class="nav-right">
                <span class="site-title">JooMusic</span>
                <div class="logo-container">
                    <img src="/logo.png" alt="JooMusic" class="logo-image" onerror="this.src='data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%220%200%2040%2040%22%3E%3Ccircle%20cx%3D%2220%22%20cy%3D%2220%22%20r%3D%2218%22%20fill%3D%22%23333%22%20stroke%3D%22%23fff%22%20stroke-width%3D%222%22%2F%3E%3Ctext%20x%3D%2220%22%20y%3D%2225%22%20text-anchor%3D%22middle%22%20fill%3D%22%23fff%22%20font-size%3D%2212%22%20font-family%3D%22Arial%22%3EJM%3C%2Ftext%3E%3C%2Fsvg%3E'">
                </div>
            </div>
        </nav>

        <!-- sidebar overlay -->
        <div class="sidebar-overlay" id="sidebarOverlay"></div>

        <!-- sidebar menu -->
        <div class="sidebar" id="sidebar">
            <a href="#" class="menu-item" id="menuHome">
                <svg viewBox="0 0 24 24"><path d="M3 10L12 3L21 10V20H3V10Z"/></svg>
                <span>Beranda</span>
            </a>
            <a href="#" class="menu-item" id="menuDonate">
                <svg viewBox="0 0 24 24"><path d="M20 12V20H4V12M12 2L3 7H21L12 2Z"/></svg>
                <span>Donasi</span>
            </a>
            
            <div class="developer-section">
                <div class="dev-name">JooModdss</div>
                <div class="dev-bio">Developer pemula 14th, baik hati, belajar HTML, CSS, JS, React, Node.js, Express, bot Baileys, dan digital marketing.</div>
                <div class="contact-links">
                    <a href="https://t.me/fsmurfs" target="_blank" class="contact-link">
                        <svg viewBox="0 0 24 24"><path d="M22 2L11 13M22 2L15 22L11 13M22 2L2 9L11 13"/></svg>
                    </a>
                    <a href="https://github.com/Joodev23" target="_blank" class="contact-link">
                        <svg viewBox="0 0 24 24"><path d="M9 19C4 20.5 4 16.5 2 16M16 22V18.5C16 17.3 16.1 16.9 14.5 16.5C18 16 22 14.5 22 9.5C21.9 7.5 21 5.5 19 4.5C19.5 3 19.5 1.5 18 1C18 1 16.5 1.5 15 3C12.5 2.5 10 2.5 7.5 3C6 1.5 4.5 1 4.5 1C3 1.5 3 3 3.5 4.5C1.5 5.5 0.5 7.5 0.5 9.5C0.5 14.5 4.5 16 8 16.5C6.5 17 6.5 17.5 6.5 18.5V22"/></svg>
                    </a>
                </div>
            </div>
        </div>

        <!-- main content -->
        <main class="main-content" id="mainContent">
            <!-- home page -->
            <div id="homePage">
                <!-- search -->
                <div class="search-container">
                    <div class="search-wrapper">
                        <svg class="search-icon" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.5" y2="16.5"/></svg>
                        <input type="text" class="search-input" id="searchInput" placeholder="Cari lagu, artis, atau album...">
                    </div>
                </div>

                <!-- recent play section -->
                <div class="section-header">
                    <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                    <h2>Recent Play</h2>
                </div>
                <div class="recent-grid" id="recentGrid"></div>

                <!-- search results -->
                <div id="searchResults"></div>
            </div>

            <!-- donation page (hidden by default) -->
            <div id="donationPage" style="display: none;">
                <div class="donation-section">
                    <h1 class="donation-title">Dukung Developer</h1>
                    <p class="donation-text">Halo, saya JooModdss, developer pemula 14 tahun. Sedang belajar coding dan mengembangkan website ini. Dukungan kalian sangat berarti untuk semangat belajar saya. Terima kasih ❤️</p>
                    
                    <div class="qris-container">
                        <img src="/qris.png" alt="QRIS" class="qris-image" onerror="this.src='data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22300%22%20height%3D%22300%22%20viewBox%3D%220%200%20300%20300%22%3E%3Crect%20width%3D%22300%22%20height%3D%22300%22%20fill%3D%22%23222%22%2F%3E%3Cpath%20d%3D%22M100%20100L200%20200M200%20100L100%20200%22%20stroke%3D%22%23fff%22%20stroke-width%3D%224%22%2F%3E%3Ctext%20x%3D%22150%22%20y%3D%22160%22%20text-anchor%3D%22middle%22%20fill%3D%22%23fff%22%20font-size%3D%2224%22%3EQRIS%3C%2Ftext%3E%3C%2Fsvg%3E'">
                    </div>

                    <button class="download-btn" id="downloadQris">
                        <svg viewBox="0 0 24 24"><path d="M12 16V4M8 12L12 16L16 12"/><path d="M4 20H20"/></svg>
                        Download QRIS
                    </button>
                </div>
            </div>
        </main>

        <!-- now playing bar -->
        <div class="now-playing-bar" id="nowPlayingBar">
            <img src="" alt="" class="now-playing-thumb" id="nowPlayingThumb">
            <div class="now-playing-info">
                <div class="now-playing-title" id="nowPlayingTitle"></div>
                <div class="now-playing-artist" id="nowPlayingArtist"></div>
            </div>
            <div class="now-playing-controls">
                <button class="control-btn" id="prevBtn">
                    <svg viewBox="0 0 24 24"><polygon points="19 20 9 12 19 4 19 20"/><line x1="5" y1="4" x2="5" y2="20"/></svg>
                </button>
                <button class="control-btn play-btn" id="playPauseBtn">
                    <svg viewBox="0 0 24 24" id="playIcon"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                    <svg viewBox="0 0 24 24" id="pauseIcon" style="display: none;"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
                </button>
                <button class="control-btn" id="nextBtn">
                    <svg viewBox="0 0 24 24"><polygon points="5 4 15 12 5 20 5 4"/><line x1="19" y1="4" x2="19" y2="20"/></svg>
                </button>
            </div>
        </div>

        <!-- full player -->
        <div class="full-player" id="fullPlayer">
            <div class="player-header">
                <div></div>
                <div class="close-player" id="closePlayer">
                    <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                </div>
            </div>
            
            <img src="" alt="" class="player-thumb" id="playerThumb">
            <h1 class="player-title" id="playerTitle"></h1>
            <div class="player-artist" id="playerArtist"></div>
            
            <div class="player-main-controls">
                <button class="control-btn" id="playerPrevBtn">
                    <svg viewBox="0 0 24 24"><polygon points="19 20 9 12 19 4 19 20"/><line x1="5" y1="4" x2="5" y2="20"/></svg>
                </button>
                <button class="control-btn play-btn" id="playerPlayPauseBtn">
                    <svg viewBox="0 0 24 24" id="playerPlayIcon"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                    <svg viewBox="0 0 24 24" id="playerPauseIcon" style="display: none;"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
                </button>
                <button class="control-btn" id="playerNextBtn">
                    <svg viewBox="0 0 24 24"><polygon points="5 4 15 12 5 20 5 4"/><line x1="19" y1="4" x2="19" y2="20"/></svg>
                </button>
            </div>

            <div class="lyrics-section">
                <h3 class="lyrics-title">Lirik</h3>
                <div class="lyrics-content" id="lyricsContent">Loading lirik...</div>
            </div>
        </div>
    </div>

    <audio id="audioPlayer" style="display: none;"></audio>

    <script>
        // State management
        let currentPlaylist = [];
        let currentIndex = 0;
        let isPlaying = false;
        let recentPlays = JSON.parse(localStorage.getItem('recentPlays')) || [];

        // DOM elements
        const hamburger = document.getElementById('hamburger');
        const sidebar = document.getElementById('sidebar');
        const sidebarOverlay = document.getElementById('sidebarOverlay');
        const searchInput = document.getElementById('searchInput');
        const searchResults = document.getElementById('searchResults');
        const recentGrid = document.getElementById('recentGrid');
        const nowPlayingBar = document.getElementById('nowPlayingBar');
        const fullPlayer = document.getElementById('fullPlayer');
        const audioPlayer = document.getElementById('audioPlayer');
        
        // Menu navigation
        const menuHome = document.getElementById('menuHome');
        const menuDonate = document.getElementById('menuDonate');
        const homePage = document.getElementById('homePage');
        const donationPage = document.getElementById('donationPage');

        // Now playing elements
        const nowPlayingThumb = document.getElementById('nowPlayingThumb');
        const nowPlayingTitle = document.getElementById('nowPlayingTitle');
        const nowPlayingArtist = document.getElementById('nowPlayingArtist');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const playIcon = document.getElementById('playIcon');
        const pauseIcon = document.getElementById('pauseIcon');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');

        // Player elements
        const playerThumb = document.getElementById('playerThumb');
        const playerTitle = document.getElementById('playerTitle');
        const playerArtist = document.getElementById('playerArtist');
        const playerPlayPauseBtn = document.getElementById('playerPlayPauseBtn');
        const playerPlayIcon = document.getElementById('playerPlayIcon');
        const playerPauseIcon = document.getElementById('playerPauseIcon');
        const playerPrevBtn = document.getElementById('playerPrevBtn');
        const playerNextBtn = document.getElementById('playerNextBtn');
        const closePlayer = document.getElementById('closePlayer');
        const lyricsContent = document.getElementById('lyricsContent');

        // Download QRIS
        document.getElementById('downloadQris').addEventListener('click', () => {
            const link = document.createElement('a');
            link.href = '/qris.png';
            link.download = 'JooMusic_QRIS.png';
            link.click();
        });

        // Menu toggle
        hamburger.addEventListener('click', () => {
            hamburger.classList.toggle('active');
            sidebar.classList.toggle('open');
            sidebarOverlay.classList.toggle('active');
        });

        sidebarOverlay.addEventListener('click', () => {
            hamburger.classList.remove('active');
            sidebar.classList.remove('open');
            sidebarOverlay.classList.remove('active');
        });

        // Navigation
        menuHome.addEventListener('click', (e) => {
            e.preventDefault();
            homePage.style.display = 'block';
            donationPage.style.display = 'none';
            hamburger.classList.remove('active');
            sidebar.classList.remove('open');
            sidebarOverlay.classList.remove('active');
        });

        menuDonate.addEventListener('click', (e) => {
            e.preventDefault();
            homePage.style.display = 'none';
            donationPage.style.display = 'block';
            hamburger.classList.remove('active');
            sidebar.classList.remove('open');
            sidebarOverlay.classList.remove('active');
        });

        // Close player
        closePlayer.addEventListener('click', () => {
            fullPlayer.classList.remove('show');
        });

        // Search functionality
        let searchTimeout;
        searchInput.addEventListener('input', (e) => {
            clearTimeout(searchTimeout);
            const query = e.target.value.trim();
            
            if (query.length < 2) {
                searchResults.innerHTML = '';
                return;
            }

            searchTimeout = setTimeout(() => {
                searchMusic(query);
            }, 500);
        });

async function searchMusic(query) {
    searchResults.innerHTML =
        '<div class="loading-spinner"><div class="spinner"></div></div>';

    try {
        const res = await fetch(
            `https://aliicia.my.id/api/music?alicia=${encodeURIComponent(query)}`
        );
        const data = await res.json();

        if (!data.status || !Array.isArray(data.result)) {
            searchResults.innerHTML =
                '<p style="color:#888; text-align:center; padding:40px;">Tidak ada hasil ditemukan</p>';
            return;
        }

        currentPlaylist = data.result;
        displayResults(data.result);

    } catch (error) {
        console.error(error);
        searchResults.innerHTML =
            '<p style="color:#888; text-align:center; padding:40px;">Error loading results</p>';
    }
}

        function displayResults(results) {
            let html = '<div class="results-grid">';
            results.forEach((track, index) => {
                html += `
                    <div class="result-item" data-index="${index}">
                        <img src="${track.thumbnail}" alt="${track.title}" class="result-thumb" onerror="this.src='data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2260%22%20height%3D%2260%22%20viewBox%3D%220%200%2060%2060%22%3E%3Crect%20width%3D%2260%22%20height%3D%2260%22%20fill%3D%22%23333%22%2F%3E%3Ctext%20x%3D%2230%22%20y%3D%2235%22%20text-anchor%3D%22middle%22%20fill%3D%22%23fff%22%20font-size%3D%2212%22%3EMusic%3C%2Ftext%3E%3C%2Fsvg%3E'">
                        <div class="result-info">
                            <div class="result-title">${track.title}</div>
                            <div class="result-artist">${track.author.name}</div>
                        </div>
                        <div class="result-duration">${track.duration}</div>
                    </div>
                `;
            });
            html += '</div>';
            searchResults.innerHTML = html;

            // Add click handlers
            document.querySelectorAll('.result-item').forEach(item => {
                item.addEventListener('click', () => {
                    const index = parseInt(item.dataset.index);
                    playTrack(index);
                });
            });
        }

async function playTrack(index) {
    const track = currentPlaylist[index];
    if (!track || !track.url) return;

    currentIndex = index;

    try {
        const res = await fetch(
            `https://aliicia.my.id/api/music?download=${encodeURIComponent(track.url)}`
        );
        const data = await res.json();

        if (!data.status || !data.result?.download_url) {
            console.error("Download URL tidak valid", data);
            return;
        }

        audioPlayer.src = data.result.download_url;

        try {
            await audioPlayer.play(); // autoplay safe
            isPlaying = true;
        } catch (e) {
            console.warn("Autoplay blocked:", e);
        }

        updateNowPlaying(track);
        updatePlayerUI(track);
        nowPlayingBar.classList.add('show');
        addToRecent(track);
        loadLyrics(track.title);

    } catch (error) {
        console.error("Error playing track:", error);
    }
}

        function updateNowPlaying(track) {
            nowPlayingThumb.src = track.thumbnail;
            nowPlayingTitle.textContent = track.title;
            nowPlayingArtist.textContent = track.author.name;
            
            playIcon.style.display = 'none';
            pauseIcon.style.display = 'block';
        }

        function updatePlayerUI(track) {
            playerThumb.src = track.thumbnail;
            playerTitle.textContent = track.title;
            playerArtist.textContent = track.author.name;
            
            playerPlayIcon.style.display = 'none';
            playerPauseIcon.style.display = 'block';
        }

        function addToRecent(track) {
            const recent = {
                id: track.id,
                title: track.title,
                artist: track.author.name,
                thumbnail: track.thumbnail,
                url: track.url,
                duration: track.duration
            };
            
            // Remove duplicate if exists
            recentPlays = recentPlays.filter(t => t.id !== track.id);
            
            // Add to beginning
            recentPlays.unshift(recent);
            
            // Keep only last 10
            if (recentPlays.length > 10) {
                recentPlays = recentPlays.slice(0, 10);
            }
            
            localStorage.setItem('recentPlays', JSON.stringify(recentPlays));
            displayRecentPlays();
        }

        function displayRecentPlays() {
            if (recentPlays.length === 0) {
                recentGrid.innerHTML = '<p style="color:#666; grid-column:1/-1; text-align:center; padding:40px;">Belum ada lagu yang diputar</p>';
                return;
            }
            
            let html = '';
            recentPlays.forEach(track => {
                html += `
                    <div class="recent-item" onclick="playRecent('${track.id}')">
                        <img src="${track.thumbnail}" alt="${track.title}" class="recent-thumb" onerror="this.src='data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22160%22%20height%3D%22160%22%20viewBox%3D%220%200%20160%20160%22%3E%3Crect%20width%3D%22160%22%20height%3D%22160%22%20fill%3D%22%23333%22%2F%3E%3Ctext%20x%3D%2280%22%20y%3D%2290%22%20text-anchor%3D%22middle%22%20fill%3D%22%23fff%22%20font-size%3D%2214%22%3EMusic%3C%2Ftext%3E%3C%2Fsvg%3E'">
                        <div class="recent-title">${track.title}</div>
                        <div class="recent-artist">${track.artist}</div>
                    </div>
                `;
            });
            recentGrid.innerHTML = html;
        }

        // Make playRecent available globally
        window.playRecent = async function(trackId) {
            const track = recentPlays.find(t => t.id == trackId);
            if (track) {
                currentPlaylist = recentPlays;
                const index = recentPlays.findIndex(t => t.id == trackId);
                await playTrack(index);
            }
        };

        async function loadLyrics(title) {
            lyricsContent.textContent = 'Loading lirik...';
            try {
                const response = await fetch(`https://aliicia.my.id/api/lyrics?search=${encodeURIComponent(title)}`);
                const data = await response.json();
                lyricsContent.textContent = data.result || 'Lirik tidak ditemukan';
            } catch (error) {
                lyricsContent.textContent = 'Gagal memuat lirik';
            }
        }

        // Audio controls
        playPauseBtn.addEventListener('click', togglePlay);
        playerPlayPauseBtn.addEventListener('click', togglePlay);
        
        prevBtn.addEventListener('click', playPrevious);
        playerPrevBtn.addEventListener('click', playPrevious);
        
        nextBtn.addEventListener('click', playNext);
        playerNextBtn.addEventListener('click', playNext);

        // Click on now playing bar to open full player
        nowPlayingBar.addEventListener('click', (e) => {
            if (!e.target.closest('.now-playing-controls')) {
                fullPlayer.classList.add('show');
            }
        });

        function togglePlay() {
            if (isPlaying) {
                audioPlayer.pause();
                playIcon.style.display = 'block';
                pauseIcon.style.display = 'none';
                playerPlayIcon.style.display = 'block';
                playerPauseIcon.style.display = 'none';
            } else {
                audioPlayer.play();
                playIcon.style.display = 'none';
                pauseIcon.style.display = 'block';
                playerPlayIcon.style.display = 'none';
                playerPauseIcon.style.display = 'block';
            }
            isPlaying = !isPlaying;
        }

        function playPrevious() {
            if (currentPlaylist.length > 0) {
                const newIndex = (currentIndex - 1 + currentPlaylist.length) % currentPlaylist.length;
                playTrack(newIndex);
            }
        }

        function playNext() {
            if (currentPlaylist.length > 0) {
                const newIndex = (currentIndex + 1) % currentPlaylist.length;
                playTrack(newIndex);
            }
        }

        // Audio ended event
        audioPlayer.addEventListener('ended', playNext);

        // Initialize
        displayRecentPlays();
    </script>
</body>
</html>